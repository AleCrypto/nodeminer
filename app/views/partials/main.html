<div ng-controller="MinerCtrl">
    <h2>Dashboard</h2>
  <!--<small>{{calculateDashboardSummary().miners}} Miners / {{calculateDashboardSummary().devices}} GPUs / 8.51 Mh/s Total Hashrate</small>-->

    <div class="panel panel-default">
        <div class="panel-heading handicon" ng-click="toggleSummary()">
            <i class="fa" ng-class="{'fa-chevron-up':showSummary == true, 'fa-chevron-down':showSummary == false}"></i>&nbsp;<strong>Overview</strong>
        </div>

        <div class="row">
            <div class="col-sm-4">
                <table class="table" ng-show="showSummary">
                    <tbody>
                        <tr>
                            <td><strong>Current Hashrate</strong></td>
                            <td>4.35 Mh/s</td>
                        </tr>
                        <tr>
                            <td><strong>Accepted Shares</strong></td>
                            <td>4391 Total Accepted Shares</td>
                        </tr>
                        <tr>
                            <td><strong>Rejected Shares</strong></td>
                            <td>127 Total Rejected Shares</td>
                        </tr>
                        <tr>
                            <td><strong>Reject Ratio</strong></td>
                            <td>0.12%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-sm-4">
                <table class="table" ng-show="showSummary">
                    <tbody>
                        <tr>
                            <td><strong>Average Hashrate</strong></td>
                            <td>3.7 Mh/s</td>
                        </tr>
                        <tr>
                            <td><strong>Average Temperature</strong></td>
                            <td>79C</td>
                        </tr>
                        <tr>
                            <td><strong>Average Fan Speed</strong></td>
                            <td>95%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-sm-4">
                <table class="table" ng-show="showSummary">
                    <tbody>
                        <tr>
                            <td><strong>Total GPUs</strong></td>
                            <td>5</td>
                        </tr>
                        <tr>
                            <td><strong>Healthy GPUs</strong></td>
                            <td>5</td>
                        </tr>
                        <tr>
                            <td><strong>Sick GPUs</strong></td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td><strong>Active Pools</strong></td>
                            <td>1</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <hr />

    <div class="panel panel-default" ng-repeat="miner in miners">
        <div class="panel-heading">
            <strong>{{miner.name}}</strong>
            &nbsp;&nbsp;
            <span class="label label-primary">{{miner.numberOfDevices}} devices</span>
            <span class="label label-primary">{{miner.totalHashrate}}</span>

            <div id="notifications" class="fa-stack notification-bell pull-right" title="Notifications">
                <i class="fa fa-bell-o fa-stack-2x notification-bell-icon"></i>
                <i class="fa fa-stack fa-stack-1x notification-bell-badge" ng-show="miner.notifications.count > 0">
                    <span class="label label-danger">{{miner.notifications.count}}</span>
                </i>
            </div>

            <div id="change-pool" class="btn-group btn-group-xs pull-right miner-dropdown">
                <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                    <i class="fa fa-cloud"></i>&nbsp; Change Pool <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="pool in pools"><a href="#"><i class="fa fa-users fa-fw"></i>&nbsp; {{pool.name}} ({{pool.url}})</a></li>
                </ul>
            </div>

            <div id="change-coin" class="btn-group btn-group-xs pull-right miner-dropdown">
                <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                    <i class="fa fa-btc"></i>&nbsp; Change Coin <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="coin in coins"><a href="#"><i class="fa fa-user fa-fw"></i>&nbsp; {{coin.name}} ({{coin.symbol}})</a></li>
                </ul>
            </div>

            <div id="actions" class="btn-group btn-group-xs pull-right miner-dropdown">
                <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                    <i class="fa fa-wrench"></i>&nbsp; Actions <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="#"><i class="fa fa-repeat fa-fw"></i>&nbsp;Restart</a></li>
                    <li><a href="#"><i class="fa fa-power-off fa-fw"></i>&nbsp;Shutdown</a></li>
                </ul>
            </div>
        </div>
        <div>
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th width="25px"></th>
                    <th>Name</th>
                    <th>Pool</th>
                    <th>Temp</th>
                    <th>Fan</th>
                    <th>Hashrate</th>
                    <th>Shares</th>
                    <th>Work Utility</th>
                    <th>Intensity</th>
                    <th>GPU Clock</th>
                    <th>Memory Clock</th>
                    <th>Voltage</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="device in miner.devices">
                    <td><span class="fa fa-fw handicon" ng-class="{'fa-check':device.Enabled == 'Y','fa-times':device.Enabled == 'N'}" ng-click="toggleGpu(device)"></span></td>
                    <td>{{device.Model}}</td>
                    <td>{{miner.pool['Stratum URL']}}</td>
                    <td>{{device.Temperature}}ยบ</td>
                    <td>{{device['Fan Percent']}}%</td>
                    <td>{{device['MHS 5s'] * 1000}} Kh/s</td>
                    <td><span class="label label-success">A:{{device.Accepted}}</span> / <span class="label label-danger">R:{{device.Rejected}}</span></td>
                    <td>{{device['Work Utility']}}</td>
                    <td>{{device['Intensity']}}</td>
                    <td>{{device['GPU Clock']}}</td>
                    <td>{{device['Memory Clock']}}</td>
                    <td>{{device['GPU Voltage']}}v</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>